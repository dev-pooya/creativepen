---
import { getCollection } from "astro:content";
import Header from "@/components/Header.astro";
import MobileHeader from "@/components/MobileHeader.astro";
import Layout from "@/layouts/Layout.astro";
import PortfolioCard from "@/components/PortfolioCard.astro";

const portfolios = await getCollection("portfolios");
---

<Layout title="نمونه کارها">
  <Header />
  <MobileHeader />
  <main class="sm:pt-20">
    <div class="max-w-screen-xl mx-auto py-10 px-5">
      <h1 class="colored-title text-5xl font-medium text-center py-10">
        نمونه کار ها
      </h1>
      <section class="">
        <div class="grid md:grid-cols-3 gap-10">
          {
            portfolios.map(({ slug, data }) => (
              <PortfolioCard portfolio={data} key={slug} />
            ))
          }
        </div>
      </section>
    </div>
  </main>
  <script>
    const cards = document.querySelectorAll("[data-element=portfolio-card]");

    cards.forEach((card) => {
      const computedStyles = getComputedStyle(card);
      const height = parseInt(computedStyles.height) - 750; // Get the height of the card
      height > 0 ? height : -1 * height;
      const duration = height / 50; // Calculate duration based on height

      card.style.setProperty("--animation-portfolio", `${duration}s`); // Set the duration dynamically
    });
  </script>
</Layout>
