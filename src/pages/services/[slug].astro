---
import Header from "@/components/Header.astro";
import MobileHeader from "@/components/MobileHeader.astro";
import Layout from "@/layouts/Layout.astro";
import { getCollection, getEntry } from "astro:content";

// Fetch the paths for all services
export async function getStaticPaths() {
  const services = await getCollection("services");

  return services.map((service) => ({
    params: { slug: service.slug },
  }));
}

const { slug } = Astro.params;

// Fetch the service entry for the given slug
const service = await getEntry("services", slug);

if (!service) {
  throw new Error(`Service not found: ${slug}`);
}

// Render the Markdown content and headings
const { Content } = await service.render();

const { title, pricingPlans } = service.data;
---

<Layout title={title}>
  <Header />
  <MobileHeader />
  <main class="sm:pt-20">
    <div class="max-w-screen-xl mx-auto py-10">
      <h1 class="colored-title text-5xl font-medium text-center py-10">
        {title}
      </h1>
      <Content />
      <section class="py-10"></section>
    </div>
  </main>
</Layout>
<!-- <html>
  <head>
    <title>{title} - Our Services</title>
    <meta charset="UTF-8" />
  </head>
  <body class="p-8">
    <h1 class="text-4xl font-bold">{title}</h1>

    {
      pricingPlans && (
        <section class="mt-8">
          <h2 class="text-2xl font-semibold">Pricing Plans</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
            {pricingPlans.map((plan) => (
              <div class="p-4 border rounded-lg shadow-lg">
                <h3 class="text-lg font-bold">{plan.name}</h3>
                <p class="text-xl font-semibold mt-2">{plan.price}</p>
                <ul class="list-disc list-inside mt-2">
                  {plan.attributes.map((attr) => (
                    <li>{attr}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </section>
      )
    }
    <section class="mt-6">
      
<div><Content /></div>

-->
