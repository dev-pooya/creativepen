---
import Accordion from "@/components/Accordion.astro";
import Header from "@/components/Header.astro";
import MobileHeader from "@/components/MobileHeader.astro";
import { Button } from "@/components/ui/button";
import { Card } from "@/components/ui/card";
import Layout from "@/layouts/Layout.astro";
import { getCollection, getEntry } from "astro:content";

// Fetch the paths for all services
export async function getStaticPaths() {
  const services = await getCollection("services");

  return services.map((service) => ({
    params: { slug: service.slug },
  }));
}

const { slug } = Astro.params;

// Fetch the service entry for the given slug
const service = await getEntry("services", slug);

if (!service) {
  throw new Error(`Service not found: ${slug}`);
}

// Render the Markdown content and headings
const { Content } = await service.render();

const { title, pricingPlans, faqs } = service.data;
---

<Layout title={title}>
  <Header />
  <MobileHeader />
  <main class="sm:pt-20">
    <div class="max-w-screen-xl mx-auto py-10">
      <h1 class="colored-title text-5xl font-medium text-center py-10">
        {title}
      </h1>
      <Content />
      <section class="py-10">
        <h2 class="text-2xl md:text-4xl text-center font-semibold mt-16">
          پلن‌های طراحی وب سایت
        </h2>
        <p class="text-sky-400 text-center pt-3">
          با دریافت مشاوره از کارشناسان حرفه‌ای ما، طرح مناسب کسب و کارتان را
          انتخاب کنید
        </p>
        <div class="grid md:grid-cols-3 gap-10 pt-10">
          {
            pricingPlans.map((plan, index) => (
              <Card className="p-5 rounded-xl flex flex-col">
                <div class="pt-3">
                  <h3 class="text-2xl font-semibold">{plan.title}</h3>
                  <p class="font-semibold mt-3" />
                  <div class="">
                    <span class="font-semibold text-4xl dark:text-sky-400 text-primary-600">
                      {plan.price}
                    </span>
                    <span class="text-xl">/شروع قیمت</span>
                    <br />
                  </div>
                </div>
                <ul class="py-6">
                  {plan.attributes.map((att) => (
                    <li>
                      <span class="text-2xl pe-1 text-sky-400">&#10003;</span>
                      {att}
                    </li>
                  ))}
                </ul>
                <Button
                  className="w-full mt-auto"
                  variant={index !== 1 ? "secondary" : "default"}
                >
                  سفارش
                </Button>
              </Card>
            ))
          }
        </div>
        <section class="mt-32">
          <h2 class="text-2xl md:text-4xl text-center font-semibold mt-16">
            سوالات متداول
          </h2>
          <p class="text-sky-400 text-center pt-3">
            پاسخ سوالات خود را با درخواست مشاوره از کارشناسان ما دریافت کنید
          </p>
          <div class="flex flex-col mx-auto gap-3 max-w-3xl mt-10">
            {
              faqs.map((faq) => (
                <div>
                  <Accordion header={faq.question} body={faq.answer} />
                </div>
              ))
            }
          </div>
        </section>
      </section>
    </div>
  </main>
</Layout>
<!-- <html>
  <head>
    <title>{title} - Our Services</title>
    <meta charset="UTF-8" />
  </head>
  <body class="p-8">
    <h1 class="text-4xl font-bold">{title}</h1>

    {
      pricingPlans && (
        <section class="mt-8">
          <h2 class="text-2xl font-semibold">Pricing Plans</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
            {pricingPlans.map((plan) => (
              <div class="p-4 border rounded-lg shadow-lg">
                <h3 class="text-lg font-bold">{plan.name}</h3>
                <p class="text-xl font-semibold mt-2">{plan.price}</p>
                <ul class="list-disc list-inside mt-2">
                  {plan.attributes.map((attr) => (
                    <li>{attr}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </section>
      )
    }
    <section class="mt-6">
      
<div><Content /></div>

-->
